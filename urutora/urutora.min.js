/*! Urutora.js JavaScript Library v0.0.3 | Copyright Urutora.js | Released under the MIT license */
var ut={};ut.tables={},ut.byId=function(a){return document.getElementById(a)},ut.byClass=function(a,b){var c=document;return b&&(c=b),c.getElementsByClassName(a)},ut.hideRow=function(a){a.style.display="none"},ut.showRow=function(a){a.style.display="table-row"},ut.wrap=function(a,b){a.parentNode.insertBefore(b,a),b.appendChild(a)},ut.create=function(a){return document.createElement(a)},ut.firstPage=function(a){var b=ut.tables[a];b.currentPage=1,ut.refresh(a)},ut.prevPage=function(a){var b=ut.tables[a];b.currentPage--,b.currentPage<1&&(b.currentPage=1),ut.refresh(a)},ut.nextPage=function(a){var b=ut.tables[a];b.currentPage++,b.currentPage>b.pageCount&&(b.currentPage=b.pageCount),ut.refresh(a)},ut.lastPage=function(a){var b=ut.tables[a];b.currentPage=b.pageCount,ut.refresh(a)},ut.goToPage=function(a,b){},ut.refreshPageIndicator=function(a){var b=ut.tables[a],c=ut.byId("ut-wrapper-"+a),d=ut.byClass("ut-page-td",c)[0],e=b.currentPage+"/"+b.pageCount;b.options.tags.pageIndicator&&(e=b.options.tags.pageIndicator,e=e.replace("{current}",b.currentPage),e=e.replace("{total}",b.pageCount)),d.innerHTML=e},ut.refresh=function(a){var b=ut.tables[a],c=b.reference,d=c.querySelector("tbody");if(d){var e=d.childNodes.length;e-=c.querySelectorAll("tbody tr.ut-hidden-row").length,b.searching&&(e=c.querySelectorAll("tr[search-page-number]").length),b.rowCount=e,b.pageCount=Math.ceil(b.rowCount/b.pageSize);var f=1;b.currentPage>b.pageCount&&(b.currentPage=b.pageCount||1);var g=1,h=1,i="page-number";b.searching&&(i="search-page-number");for(var j=0,k=0;k<d.childNodes.length;k++){var l=d.childNodes[k];l.setAttribute("page-number",f),g%b.pageSize===0&&f++,l.getAttribute(i)!=b.currentPage?ut.hideRow(l):(ut.showRow(l),j++,h%2===0?l.setAttribute("class","ut-even-row"):l.removeAttribute("class"),h++),g++}0==d.childNodes.length?ut.hideRow(c.parentNode.querySelector(".ut-nav-row")):ut.showRow(c.parentNode.querySelector(".ut-nav-row"));for(var m=j%b.pageSize,n=c.querySelectorAll("tbody tr.ut-hidden-row"),o=0;o<n.length;o++)c.querySelector("tbody").removeChild(n[o]);if(0!=m)for(var p=b.pageSize-m,o=0;o<p;o++){var q=document.createElement("tr");q.setAttribute("page-number",b.pageCount),q.setAttribute("class","ut-hidden-row"),q.style.visibility="hidden";var r=document.createElement("td");r.innerHTML="&nbsp;",r.setAttribute("colspan",b.columnCount),q.appendChild(r),c.querySelector("tbody").appendChild(q)}}ut.refreshPageIndicator(a)},ut.search=function(a,b){var c=ut.tables[a],d=c.reference,e=!1,f=1,g=d.querySelector("tbody");if(g){for(var h=1,i=0;i<g.childNodes.length;i++){for(var j=g.childNodes[i],k=!1,l=0;l<j.childNodes.length;l++){var m=j.childNodes[l];targetText=m.innerText,c.options.caseSensitive||(targetText=m.innerText.toLowerCase(),b=b.toLowerCase()),targetText.indexOf(b)!=-1&&(k=!0,e=!0)}k?"ut-hidden-row"!=j.getAttribute("class")&&(j.setAttribute("search-page-number",h),f%c.pageSize===0&&h++,f++):j.removeAttribute("search-page-number")}var n=ut.byId("ut-wrapper-"+a),o=n.querySelector("tr.ut-nav-row"),p=n.querySelector("tr.ut-no-results-row");ut.refresh(a),e?(ut.showRow(o),ut.hideRow(p)):(ut.hideRow(o),ut.showRow(p))}},ut.init=function(a,b){var c=b||{};ut.tables[a]={reference:ut.byId(a),pageSize:c.pageSize||5,currentPage:1,options:c};var d=ut.tables[a],e=d.reference;if(e){var f=document.createElement("div");f.setAttribute("class","ut-wrapper"),f.setAttribute("id","ut-wrapper-"+a),d.columnCount=e.querySelectorAll("thead tr:last-child th").length,ut.wrap(e,f),e.setAttribute("ut-table","true"),0==d.options.tableStyling&&e.removeAttribute("ut-table");var g=ut.create("table");g.setAttribute("class","ut-nav-table");var h=ut.create("tr");h.setAttribute("class","ut-nav-row"),d.options.tags||(d.options.tags={});var i=d.options.tags,j=ut.create("td");j.setAttribute("class","ut-nav ut-td-first"),j.innerHTML=i.firstPage||"<<",j.onclick=function(){ut.firstPage(a)};var k=ut.create("td");k.setAttribute("class","ut-nav ut-td-prev"),k.innerHTML=i.prevPage||"<",k.onclick=function(){ut.prevPage(a)};var l=ut.create("td");l.setAttribute("class","ut-page-td");var m=ut.create("td");m.setAttribute("class","ut-nav ut-td-next"),m.innerHTML=i.nextPage||">",m.onclick=function(){ut.nextPage(a)};var n=ut.create("td");if(n.setAttribute("class","ut-nav ut-td-last"),n.innerHTML=i.lastPage||">>",n.onclick=function(){ut.lastPage(a)},h.appendChild(j),h.appendChild(k),h.appendChild(l),h.appendChild(m),h.appendChild(n),g.appendChild(h),f.appendChild(g),!c.disableSearch){var o;c.searchInput?o=c.searchInput:(o=ut.create("input"),o.setAttribute("class","ut-search-input"),o.setAttribute("placeholder",i.searchPlaceHolder||"Search"),f.insertBefore(o,f.firstChild)),o.onkeyup=function(){var b=o.value.trim();b?(d.searching=!0,ut.search(a,b)):(ut.showRow(h),ut.hideRow(ut.byClass("ut-no-results-row",f)[0]),d.searching=!1,ut.refresh(a))}}var p=document.createElement("tr"),q=document.createElement("td");p.setAttribute("class","ut-no-results-row"),q.innerHTML=i.noResults||"No results found",q.setAttribute("colspan","5"),p.appendChild(q),g.appendChild(p),ut.refresh(a)}else alert("No table with id '"+a+"' found!");d.state="ready"};
